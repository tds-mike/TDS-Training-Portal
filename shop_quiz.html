<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TDS - Technician Knowledge Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="navigation.js" defer></script>
    <script src="footer.js" defer></script>
    <style>
        body { font-family: 'Inter', sans-serif; }
        .quiz-question { border: 1px solid #e5e7eb; border-radius: 0.5rem; margin-bottom: 2rem; }
        .question-header { background-color: #f9fafb; padding: 1rem 1.5rem; border-bottom: 1px solid #e5e7eb; }
        .question-body { padding: 1.5rem; }
        .answer-option { display: block; padding: 0.75rem 1rem; border: 1px solid #d1d5db; border-radius: 0.375rem; margin-bottom: 0.5rem; cursor: pointer; transition: all 0.2s ease; }
        .answer-option:hover:not(:disabled) { background-color: #f3f4f6; }
        .answer-option.selected { border-color: #2563eb; background-color: #dbeafe; }
        .answer-option.correct { border-color: #16a34a; background-color: #dcfce7; }
        .answer-option.incorrect { border-color: #dc2626; background-color: #fee2e2; }
        .feedback-summary { margin-top: 1rem; padding: 1rem; border-radius: 0.375rem; display: none; }
        .feedback-summary.correct { background-color: #dcfce7; color: #166534; }
        .feedback-summary.incorrect { background-color: #fee2e2; color: #991b1b; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <main-header></main-header>

    <main class="container mx-auto px-6 py-12">
        <section id="quiz-content">
            <h2 class="text-5xl font-bold mb-8 text-center text-blue-600">Technician Knowledge Quiz</h2>
            <p class="text-lg text-gray-600 max-w-3xl mb-12 mx-auto text-center">Test your knowledge of our core procedures and standards. This quiz covers key information from all modules in the Technician Portal.</p>
            
            <div id="quiz-container">
                <!-- Questions will be dynamically inserted here -->
            </div>
            
            <button id="submit-answers" class="hidden w-full bg-blue-600 text-white font-bold py-3 px-4 rounded hover:bg-blue-700">Submit Answers</button>

            <div id="results-container" class="hidden text-center bg-white p-8 rounded-lg shadow-md">
                <h3 class="text-3xl font-bold">Quiz Complete!</h3>
                <p class="text-xl mt-4">You scored <span id="score" class="font-bold"></span> out of <span id="total-questions" class="font-bold"></span>.</p>
                <div id="results-details" class="mt-6 text-left max-w-2xl mx-auto"></div>
                <button id="retake-quiz" class="mt-8 bg-blue-600 text-white font-bold py-2 px-4 rounded hover:bg-blue-700">Retake Quiz</button>
            </div>
        </section>
    </main>

    <main-footer></main-footer>

    <script>
        const shopQuizData = [
            // Chemicals
            { module: "Chemicals", question: "What is the correct dilution ratio for CARPRO PERL when used on interior plastics?", options: ["1:1", "1:3", "1:5", "1:10"], answer: "1:5" },
            { module: "Chemicals", question: "Which chemical is mandatory for the final wipe-down before applying any ceramic coating?", options: ["CARPRO Reset", "CARPRO MultiX", "CARPRO Eraser", "CARPRO TarX"], answer: "CARPRO Eraser" },
            { module: "Chemicals", question: "What type of water MUST be used for mixing PPF slip and tack solutions?", options: ["Tap Water", "Bottled Water", "Distilled Water", "Softened Water"], answer: "Distilled Water" },
            { module: "Chemicals", question: "A vehicle has heavy mineral deposits (water spots). Which CARPRO soap is specifically designed to remove them?", options: ["Reset", "Lift", "Hydro2 Foam", "Descale"], answer: "Descale" },
            { module: "Chemicals", question: "What is the primary danger associated with using an Ozone Generator?", options: ["Fire hazard", "Toxic to humans/pets if inhaled", "Can stain interiors", "Electrical shock"], answer: "Toxic to humans/pets if inhaled" },
            // Exterior
            { module: "Exterior", question: "A PDG reads 85Âµm on a panel. What is the maximum level of paint correction that is safe to perform?", options: ["Wetsanding", "Two-Step Correction", "One-Step Correction", "Light Gloss Enhancement"], answer: "Light Gloss Enhancement" },
            { module: "Exterior", question: "What is the primary purpose of a Decontamination Wash?", options: ["To make the car shiny", "To remove loose dirt only", "To remove bonded contaminants like iron and tar", "To prepare for a quick wax"], answer: "To remove bonded contaminants like iron and tar" },
            { module: "Exterior", question: "When performing a two-step correction, what is the purpose of the second (polishing) step?", options: ["To remove deep scratches", "To add a layer of wax", "To remove compounding haze and refine the gloss", "To clean the paint"], answer: "To remove compounding haze and refine the gloss" },
            { module: "Exterior", question: "What is the visual cue that a ceramic coating is ready to be leveled (wiped off)?", options: ["It turns white", "It creates a 'rainbow' or 'oil slick' effect", "It becomes sticky", "It disappears completely"], answer: "It creates a 'rainbow' or 'oil slick' effect" },
            { module: "Exterior", question: "What does the 'WO' (Wash Order) dictate?", options: ["Washing from the dirtiest to cleanest areas", "Washing from bottom to top", "Washing from cleanest to dirtiest areas (top to bottom)", "Washing in any order"], answer: "Washing from cleanest to dirtiest areas (top to bottom)" },
            // Interior
            { module: "Interior", question: "What is the first step in the 'Full Interior Restoration' workflow after removing all personal items?", options: ["Vacuuming", "Shampooing carpets", "The 'Back-to-Front' Air Purge", "Cleaning the glass"], answer: "The 'Back-to-Front' Air Purge" },
            { module: "Interior", question: "You encounter Alcantara seats. Which product is strictly forbidden for cleaning them?", options: ["A dedicated Alcantara cleaner", "A soft brush", "A degreaser or harsh APC", "A damp microfiber towel"], answer: "A degreaser or harsh APC" },
            { module: "Interior", question: "What is the mandatory air-out time after running an ozone generator in a vehicle?", options: ["5 minutes", "10 minutes", "15 minutes", "A minimum of 30 minutes"], answer: "A minimum of 30 minutes" },
            { module: "Interior", question: "When cleaning perforated leather, what is the correct technique to avoid clogging the holes?", options: ["Spray the cleaner directly onto the seat", "Use a pressure washer", "Spray the cleaner onto your brush or towel first", "Avoid cleaning it"], answer: "Spray the cleaner onto your brush or towel first" },
            { module: "Interior", question: "Which of these is NOT part of the 'TDS Signature Finish'?", options: ["Applying a TDS sticker to the door jamb", "Placing a paper floor mat on the driver's side", "Leaving the invoice on the passenger seat", "Hanging a TDS air freshener"], answer: "Leaving the invoice on the passenger seat" },
            // Tint
            { module: "Tint", question: "What is the TDS Standard for an installation with a visible crease or several specs of debris?", options: ["Offer a discount", "Ignore it", "When in doubt, redo it", "Try to hide it"], answer: "When in doubt, redo it" },
            { module: "Tint", question: "What is the critical aftercare instruction for every window tint customer?", options: ["Don't wash the car for a week", "Avoid direct sunlight", "Do not roll down the windows for 3-5 days", "Apply wax to the tint"], answer: "Do not roll down the windows for 3-5 days" },
            { module: "Tint", question: "What is the primary, faster method taught for shrinking film on side windows?", options: ["Traditional Shrink", "Snap-Shrink", "Dry Shrink", "No-Shrink method"], answer: "Snap-Shrink" },
            { module: "Tint", question: "Which type of tint film requires more heat and time to shrink properly?", options: ["Dyed Film", "Carbon Film", "Ceramic Film", "All films shrink the same"], answer: "Ceramic Film" },
            { module: "Tint", question: "What is the purpose of 'flushing the seals' during glass prep?", options: ["To lubricate the rubber", "To force water and hidden debris out from the edges", "To cool down the glass", "To make the film stick better"], answer: "To force water and hidden debris out from the edges" },
            // PPF
            { module: "PPF", question: "What is the TDS Standard for water used in all PPF solutions?", options: ["Tap Water", "Softened Water", "Distilled Water", "Bottled Spring Water"], answer: "Distilled Water" },
            { module: "PPF", question: "What is the audible sound a technician should listen for when trimming PPF with a blade?", options: ["A loud pop", "A tearing sound", "An audible 'squeak'", "Silence"], answer: "An audible 'squeak'" },
            { module: "PPF", question: "A customer with Premium (10-Year) PPF notices a light scratch. What feature does this film have?", options: ["It needs to be replaced", "Heat-activated self-healing", "Instant self-healing", "The warranty covers scratches"], answer: "Instant self-healing" },
            { module: "PPF", question: "When is it appropriate to use an adhesive promoter like ProBond?", options: ["On all installations", "Never", "As a last resort on extremely difficult areas", "To make the film easier to remove"], answer: "As a last resort on extremely difficult areas" },
            { module: "PPF", question: "What is the purpose of wrapping edges during a PPF installation?", options: ["To use more film", "To make it easier to remove", "To create a cleaner, virtually invisible look", "To trap moisture"], answer: "To create a cleaner, virtually invisible look" },
        ];
        
        // --- Generic Quiz Logic ---
        const quizContainer = document.getElementById('quiz-container');
        const submitButton = document.getElementById('submit-answers');
        const resultsContainer = document.getElementById('results-container');
        const scoreElement = document.getElementById('score');
        const totalQuestionsElement = document.getElementById('total-questions');
        const retakeQuizButton = document.getElementById('retake-quiz');
        const resultsDetails = document.getElementById('results-details');

        let userAnswers = {};

        function loadQuiz() {
            quizContainer.innerHTML = '';
            userAnswers = {};
            shopQuizData.sort(() => Math.random() - 0.5); // Randomize questions
            
            shopQuizData.forEach((q, index) => {
                const questionElement = document.createElement('div');
                questionElement.classList.add('quiz-question');
                
                let optionsHTML = '';
                q.options.forEach(option => {
                    optionsHTML += `<button class="answer-option w-full text-left" data-question-index="${index}">${option}</button>`;
                });

                questionElement.innerHTML = `
                    <div class="question-header">
                        <h4 class="text-xl font-bold">Question ${index + 1}</h4>
                    </div>
                    <div class="question-body">
                        <p class="text-lg mb-4">${q.question}</p>
                        <div class="options-container">${optionsHTML}</div>
                    </div>
                `;
                quizContainer.appendChild(questionElement);
            });

            document.querySelectorAll('.answer-option').forEach(option => {
                option.addEventListener('click', () => {
                    const questionIndex = option.dataset.questionIndex;
                    userAnswers[questionIndex] = option.textContent;
                    
                    document.querySelectorAll(`button[data-question-index="${questionIndex}"]`).forEach(btn => btn.classList.remove('selected'));
                    option.classList.add('selected');
                });
            });

            submitButton.classList.remove('hidden');
            resultsContainer.classList.add('hidden');
            quizContainer.classList.remove('hidden');
        }

        submitButton.addEventListener('click', () => {
            let score = 0;
            resultsDetails.innerHTML = '';

            shopQuizData.forEach((q, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === q.answer;
                if (isCorrect) {
                    score++;
                }
                const resultItem = document.createElement('div');
                resultItem.classList.add('mb-4', 'p-4', 'rounded-lg', isCorrect ? 'bg-green-50' : 'bg-red-50');
                resultItem.innerHTML = `
                    <p class="font-bold">${index + 1}. ${q.question}</p>
                    <p class="text-sm mt-2">Your answer: <span class="${isCorrect ? 'text-green-700' : 'text-red-700'}">${userAnswer || 'Not answered'}</span></p>
                    ${!isCorrect ? `<p class="text-sm mt-1">Correct answer: <span class="text-green-700">${q.answer}</span></p>` : ''}
                `;
                resultsDetails.appendChild(resultItem);
            });
            
            scoreElement.textContent = score;
            totalQuestionsElement.textContent = shopQuizData.length;
            
            quizContainer.classList.add('hidden');
            submitButton.classList.add('hidden');
            resultsContainer.classList.remove('hidden');
        });
        
        retakeQuizButton.addEventListener('click', loadQuiz);

        loadQuiz();
    </script>
</body>
</html>

